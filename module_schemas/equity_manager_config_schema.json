{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "AI Crypto Trader Config",
  "type": "object",
  "properties": {
    "coin_symbol": {
      "type": "string",
      "description": "Päävaluutta (esim. USDT)"
    },
    "copytrade_minimum_investment": {
      "type": "number",
      "minimum": 0,
      "description": "Minimi-investointi kopiointikaupoissa"
    },
    "fetch": {
      "type": "object",
      "properties": {
        "platform": {
          "type": "string",
          "enum": ["bybit", "binance", "kraken"],
          "description": "Kaupankäyntialusta"
        },
        "accountType": {
          "type": "string",
          "enum": ["UNIFIED", "SPOT", "DERIVATIVES"],
          "description": "Tilin tyyppi"
        },
        "fallback_coin_symbols": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Varakolikot, jos pääkolikko ei ole käytettävissä"
        }
      },
      "required": ["platform", "accountType"]
    },
    "logging": {
      "type": "object",
      "properties": {
        "time_windows_hours": {
          "type": "array",
          "items": {
            "type": "integer",
            "minimum": 1
          },
          "description": "Aikaikkunat tunteina logien säilytykselle"
        }
      },
      "required": ["time_windows_hours"]
    },
    "calculators": {
      "type": "object",
      "properties": {
        "currency_decimals": {
          "type": "integer",
          "minimum": 0,
          "description": "Desimaalien määrä valuutassa"
        },
        "allowed_trade_margin_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "max_trade_margin_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        }
      },
      "required": [
        "currency_decimals",
        "allowed_trade_margin_percent",
        "max_trade_margin_percent"
      ]
    },
    "block_trades": {
      "type": "object",
      "properties": {
        "allowed_last_equity_margin_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "allowed_prev_equity_margin_percent": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "fallback_limit": {
          "type": "number",
          "minimum": 0
        }
      },
      "required": [
        "allowed_last_equity_margin_percent",
        "allowed_prev_equity_margin_percent",
        "fallback_limit"
      ]
    },
    "equity_stoploss": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "equity_stoploss_margin": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "use_pnl_margin_if_higher": {
          "type": "boolean"
        }
      },
      "required": [
        "enabled",
        "equity_stoploss_margin",
        "use_pnl_margin_if_higher"
      ]
    }
  },
  "required": [
    "coin_symbol",
    "copytrade_minimum_investment",
    "fetch",
    "logging",
    "calculators",
    "block_trades",
    "equity_stoploss"
  ]
}
