{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Trading Bot Config",
  "type": "object",
  "properties": {
    "coin_symbol": {
      "type": "string",
      "description": "Pääasiallinen valuuttasymboli (esim. USDT, BTC)"
    },
    "copytrade_minimum_investment": {
      "type": "number",
      "minimum": 0,
      "description": "Pienin sallittu sijoitus copytrade-toiminnossa"
    },
    "check_interval_minutes": {
      "type": "integer",
      "minimum": 1,
      "description": "Tarkistusväli minuutteina"
    },
    "exit_on_fetch_fail": {
      "type": "boolean",
      "description": "Suljetaanko ohjelma, jos fetch epäonnistuu"
    },
    "fetch": {
      "type": "object",
      "properties": {
        "platform": {
          "type": "string",
          "enum": ["bybit", "binance", "kraken"],
          "description": "Alusta, jolta data haetaan"
        },
        "accountType": {
          "type": "string",
          "enum": ["UNIFIED", "SPOT", "FUTURES"],
          "description": "Käytettävä tilityyppi"
        },
        "fallback_coin_symbols": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Varavaluttasymbolit, jos pää ei ole käytettävissä"
        }
      },
      "required": ["platform", "accountType", "fallback_coin_symbols"]
    },
    "logging": {
      "type": "object",
      "properties": {
        "time_windows_hours": {
          "type": "array",
          "items": {
            "type": "integer",
            "minimum": 1
          },
          "description": "Kuinka monen tunnin aikajaksoja logituksessa käytetään"
        }
      },
      "required": ["time_windows_hours"]
    },
    "calculators": {
      "type": "object",
      "properties": {
        "currency_decimals": {
          "type": "integer",
          "minimum": 0,
          "description": "Kuinka monta desimaalia käytetään valuutassa"
        },
        "allowed_trade_margin_percent": {
          "type": "number",
          "minimum": 0,
          "description": "Sallitun treidimarginaalin prosentti"
        },
        "max_trade_margin_percent": {
          "type": "number",
          "minimum": 0,
          "description": "Maksimi treidimarginaalin prosentti"
        }
      },
      "required": ["currency_decimals", "allowed_trade_margin_percent", "max_trade_margin_percent"]
    },
    "block_trades": {
      "type": "object",
      "properties": {
        "allowed_last_equity_margin_percent": {
          "type": "number",
          "minimum": 0
        },
        "allowed_prev_equity_margin_percent": {
          "type": "number",
          "minimum": 0
        },
        "fallback_limit": {
          "type": "number",
          "minimum": 0
        }
      },
      "required": ["allowed_last_equity_margin_percent", "allowed_prev_equity_margin_percent", "fallback_limit"]
    },
    "equity_stoploss": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "equity_stoploss_margin": {
          "type": "number",
          "minimum": 0
        },
        "use_pnl_margin_if_higher": {
          "type": "boolean"
        }
      },
      "required": ["enabled", "equity_stoploss_margin", "use_pnl_margin_if_higher"]
    }
  },
  "required": [
    "coin_symbol",
    "copytrade_minimum_investment",
    "check_interval_minutes",
    "exit_on_fetch_fail",
    "fetch",
    "logging",
    "calculators",
    "block_trades",
    "equity_stoploss"
  ]
}
